<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reproductor de Radio</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#FFA447">
  <link rel="apple-touch-icon" href="/icons/icon-192.png">
</head>
<body class="bg-gray-900 text-white flex flex-col items-center justify-center min-h-screen relative overflow-x-hidden">

  <!-- Botón de menú (arriba a la derecha) -->
  <div class="absolute top-4 right-4 z-50">
    <button id="menuBtn" class="text-white text-2xl focus:outline-none">
      <i class="fas fa-bars"></i>
    </button>
  </div>

  <!-- Botón de compartir -->
  <div class="absolute top-4 left-4 z-30">
    <button id="shareBtn" class="w-16 h-16 bg-blue-500 hover:bg-blue-600 text-white rounded-full shadow-lg text-2xl flex items-center justify-center focus:outline-none transition-all">
      <i class="fas fa-share-alt"></i>
    </button>
  </div>

  <!-- Contenedor para botón de instalar PWA -->
  <div id="installContainer" class="absolute bottom-4 right-4 z-50"></div>

  <!-- Menú lateral -->
  <div id="menuPanel" class="fixed top-0 left-0 h-full w-64 bg-gray-800 text-white transform -translate-x-full transition-transform duration-300 z-40 shadow-lg p-6 space-y-4">
    <h2 class="text-xl font-semibold mb-4">Redes Sociales</h2>
    <a href="https://www.facebook.com/RadioGenApCristiana" target="_blank" class="flex items-center space-x-2 text-white bg-[#1877F2] hover:bg-[#145dbf] px-4 py-2 rounded">
      <i class="fab fa-facebook"></i><span>Facebook</span>
    </a>
    <a href="https://x.com/RadioTvGenAp" target="_blank" class="flex items-center space-x-2 text-white bg-[#1DA1F2] hover:bg-[#0d8ddb] px-4 py-2 rounded">
      <i class="fab fa-twitter"></i><span>Twitter</span>
    </a>
    <a href="https://www.instagram.com/radiogenapcristiana" target="_blank" class="flex items-center space-x-2 text-white bg-gradient-to-r from-pink-500 via-red-500 to-yellow-500 hover:brightness-110 px-4 py-2 rounded">
      <i class="fab fa-instagram"></i><span>Instagram</span>
    </a>
    <a href="https://www.youtube.com/luisbuenotv" target="_blank" class="flex items-center space-x-2 text-white bg-[#FF0000] hover:bg-[#cc0000] px-4 py-2 rounded">
      <i class="fab fa-youtube"></i><span>YouTube</span>
    </a>
    <a href="https://www.tiktok.com/@radiogenapcristiana" target="_blank" class="flex items-center space-x-2 text-white bg-[#000000] hover:bg-[#1c1c1c] px-4 py-2 rounded">
      <i class="fab fa-tiktok"></i><span>TikTok</span>
    </a>
    <a href="https://paypal.me/cantanteluisbueno?country.x=MX&locale.x=es_XC" target="_blank" class="flex items-center space-x-2 text-white bg-[#0070ba] hover:bg-[#005ea6] px-4 py-2 rounded">
      <i class="fab fa-paypal"></i><span>PAYPAL</span>
    </a>
    <a href="https://vaughn.live/radiogenap" target="_blank" class="flex items-center space-x-2 text-white bg-[#FF0000] hover:bg-[#cc0000] px-4 py-2 rounded">
      <i class="fas fa-tv"></i><span>TV En Vivo</span>
    </a>
  </div>

  <!-- Logo -->
  <div class="mt-16 mb-6">
    <img src="imagen/Logo GenAp.png" alt="Logo Radio" class="w-40 h-40 object-contain rounded-full shadow-lg">
  </div>

  <!-- Slider de volumen -->
  <div class="w-64 mb-6">
    <label for="volumeSlider" class="block text-center mb-2">Volumen</label>
    <input type="range" id="volumeSlider" min="0" max="1" step="0.01" class="w-full accent-[#FFA447]">
  </div>

  <!-- Botón de reproducción redondo -->
  <button id="playBtn" class="w-16 h-16 bg-pink-600 hover:bg-pink-700 text-white rounded-full shadow-lg text-2xl flex items-center justify-center focus:outline-none transition-all">
    <i class="fas fa-play"></i>
  </button>

  <!-- Audio (radio online) -->
  <audio id="audio" src="https://stream.zeno.fm/ajnldia1z5utv"></audio>

  <script>
    // Menú lateral deslizante
    const menuBtn = document.getElementById('menuBtn');
    const menuPanel = document.getElementById('menuPanel');
    menuBtn.addEventListener('click', () => {
      menuPanel.classList.toggle('-translate-x-full');
      menuPanel.classList.toggle('translate-x-0');
    });

    // Variables de audio y control
    const playBtn = document.getElementById('playBtn');
    const audio = document.getElementById('audio');
    const volumeSlider = document.getElementById('volumeSlider');
    let isPlaying = false;

    // Cargar volumen guardado
    const savedVolume = localStorage.getItem('radioVolume');
    if (savedVolume !== null) {
      audio.volume = parseFloat(savedVolume);
      volumeSlider.value = savedVolume;
    }

    // Control de Play/Stop sin rebobinar
    playBtn.addEventListener('click', () => {
      if (!isPlaying) {
        audio.load();       // recarga el stream en vivo
        audio.play();
        playBtn.innerHTML = '<i class="fas fa-stop"></i>';
      } else {
        audio.pause();
        playBtn.innerHTML = '<i class="fas fa-play"></i>';
      }
      isPlaying = !isPlaying;
    });

    // Control de volumen
    volumeSlider.addEventListener('input', () => {
      audio.volume = volumeSlider.value;
      localStorage.setItem('radioVolume', volumeSlider.value);
    });

    // Compartir en redes sociales
    const shareBtn = document.getElementById('shareBtn');
    shareBtn.addEventListener('click', () => {
      if (navigator.share) {
        navigator.share({
          title: 'Escucha nuestra Radio',
          text: '¡Escucha nuestra radio en vivo y comparte con tus amigos!',
          url: window.location.href
        }).catch(console.error);
      } else {
        alert('Funcionalidad de compartir no soportada');
      }
    });

    // PWA install prompt
    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      const installContainer = document.getElementById('installContainer');
      const installBtn = document.createElement('button');
      installBtn.textContent = 'Instalar App';
      installBtn.className = 'bg-green-600 text-white p-3 rounded-full shadow-lg focus:outline-none';
      installContainer.appendChild(installBtn);
      installBtn.addEventListener('click', async () => {
        installBtn.disabled = true;
        deferredPrompt.prompt();
        const choiceResult = await deferredPrompt.userChoice;
        console.log('Resultado instalación:', choiceResult.outcome);
        deferredPrompt = null;
      });
    });
  </script>

  <!-- Service Worker registration for PWA install -->
  <script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/genap.github.io/sw.js')
      .then(reg => console.log('SW registrado:', reg))
      .catch(err => console.error('SW fallo:', err));
    }
  </script>
</body>
</html>
